!function(){function e(e,n,o,t){return new Promise((async function(a,r){var i=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,c=async function(){if(!i)return console.warn("IndexedDB is not supported"),null;var e=await new Promise((function(e,n){var o=i.open("EM_PRELOAD_CACHE",1);o.onupgradeneeded=function(e){var n=e.target.result;n.objectStoreNames.contains("PACKAGES")&&n.deleteObjectStore("PACKAGES"),n.createObjectStore("PACKAGES")},o.onerror=function(e){n(e)},o.onsuccess=function(n){e(n.target.result)}}));return e.objectStoreNames.contains("PACKAGES")||(e.close(),await new Promise((function(e,n){var o=i.deleteDatabase("EM_PRELOAD_CACHE");o.onerror=function(e){n(e)},o.onsuccess=function(n){e(n.target.result)}})),e=await c()),e},s=await async function(e){var o=await c(),t=null;if(e&&o&&(t=await new Promise((function(e,t){var a=o.transaction(["PACKAGES"],"readonly").objectStore("PACKAGES").get(n);a.onerror=function(e){t(e)},a.onsuccess=function(n){e(n.target.result)}}))),!(t&&t instanceof Uint8Array)){console.log("fetching:"+n);var a=await fetch(n);if(!a.ok)return r("Could not fetch the love package");t=await a.arrayBuffer(),t=new Uint8Array(t);for(var i=[80,75,3,4],s=0;s<i.length;s++)if(t[s]!=i[s])return r("The fetched resource is not a valid love package");o&&await new Promise((function(e,a){var r=o.transaction(["PACKAGES"],"readwrite").objectStore("PACKAGES").put(t,n);r.onerror=function(e){a(e)},r.onsuccess=function(n){e()}}))}return t}(!t.nocache);if(!s)return r("Could not parse the package contents");var l=n.substring(n.lastIndexOf("/")+1),u={},d=1e9*(navigator.deviceMemory||1);if(u.INITIAL_MEMORY=Math.min(4*s.length+2e7,d),u.canvas=e,u.printErr=window.onerror,u.arguments=[l],o&&Array.isArray(o))for(var f=0;f<o.length;f++)u.arguments.push(String(o[f]));var w=async function(){u.addRunDependency("fp "+l);var e=u.getMemory(s.length);u.HEAPU8.set(s,e),u.FS_createDataFile("/",l,s,!0,!0,!0),u.removeRunDependency("fp "+l),a(u),u.finishedDataFileDownloads++};if(u.calledRun?w():(u.preRun||(u.preRun=[]),u.preRun.push(w)),u.load_libs=async function(){var e=await fetch("./fetch.lua"),n=await e.text();u.FS_createPath("/","/usr/local/share/lua/5.1",!0,!0),u.FS_createDataFile("/usr/local/share/lua/5.1","fetch.lua",n,!0,!0,!0)},void 0===window.Love){null==t.version&&(t.version="11.5");var v=document.createElement("script");v.type="text/javascript",v.src=t.version+(t.compat?"/compat/love.min.js":"/release/love.min.js"),v.async=!0,v.onload=function(){Love(u),u.load_libs()},document.body.appendChild(v)}else window.Module.pauseMainLoop(),Love(u),u.load_libs();if(window.Module=u,!u._console){var p=window.console;for(var y in u._console=p,window.console={},p)"function"==typeof p[y]&&(window.console[y]=p[y].bind(p));window.console.log=async function(){var e=arguments[0];if("string"==typeof e&&e.startsWith("@")){var o=e.match(/^@([^\t]+)\t([^\t]+)\t([^\t]+)\t?(.*)/);if(o){var t="";try{if("fetch"==o[1]){if((w=o[4]?JSON.parse(o[4]):{}).headers=w.headers||{},w.body&&"object"==typeof w.body){var a=new FormData;for(var r in w.body)a.append(r,w.body[r]);w.body=a}for(var i=await fetch(o[3],w),s=Array.from(String(i.status),Number);s.length<3;)s.unshift(0);for(var l=0;l<s.length;l++)s[l]+=48;s=Uint8Array.from(s);var d=await i.arrayBuffer();d&&d.byteLength>0?((t=new Uint8Array(d.byteLength+3)).set(s),t.set(new Uint8Array(d),3)):t=s}else if("speak"==o[1]){var f=window.speechSynthesis;if(f){f.speaking&&f.cancel();var w=o[4]?JSON.parse(o[4]):{},v=new SpeechSynthesisUtterance(o[3]);v.volume=w.volume,v.rate=w.rate,f.speak(v),t="true"}else t="false"}else"reload"==o[1]&&(await async function(e){var n=await c(),o=await new Promise((function(o,t){var a=n.transaction(["PACKAGES"],"readwrite").objectStore("PACKAGES").delete(e);a.onerror=function(e){t(e)},a.onsuccess=function(e){o()}}));return o}(n),window.location.reload())}catch(e){t=e,p.warn(e)}finally{if(o[2]&&"."!=o[2]){var y=o[2].lastIndexOf("/"),h=o[2].substring(y+1),g=o[2].substring(0,y);u.FS_createPath("/",g,!0,!0),u.FS_createDataFile(g,h,t,!0,!0,!0)}}return}}return p.info.apply(null,arguments)}}}))}var n=document.currentScript,o=document.getElementById("canvas");o||((o=document.createElement("CANVAS")).id="canvas",n.parentNode.insertBefore(o,n)),o.oncontextmenu=function(){event.preventDefault()};var t=document.getElementById("spinner");t||((t=document.createElement("DIV")).id="spinner",n.parentNode.after(t,n)),t.className="pending";var a=new URL(n.src);a.searchParams.has("g")||(a=new URL(window.location.href));var r=a.searchParams,i=r.get("arg"),c=r.get("g"),s={compat:r.get("c"),version:r.get("v"),nocache:"1"==r.get("n")};if(null==c&&(c="nogame.love"),i)try{i=JSON.parse(i),Array.isArray(i)||(i=[i])}catch(e){i=null,console.log(e)}window.runLove=function(){t.className="loading",e(o,c,i,s).then((function(e){o.style.display="block",o.focus(),t.className=""})).catch((function(e){console.log(e),"nogame.love"!=c&&(c="nogame.love",i=null,window.runLove())}))},window.onerror=function(e){console.error(e),""!=t.className&&(o.style.display="none",t.className="error")},window.onload=window.focus.bind(window),window.onclick=function(e){window.focus()};var l=[37,38,39,40,13];if(window.onkeydown=function(e){l.indexOf(e.keyCode)>-1&&e.preventDefault()},window.onpageshow=function(e){o.style.display="none",e.persisted&&window.location.reload()},!window.SharedArrayBuffer)throw new Error("The Cross-Origin Policy is not configured properly");window.runLove()}();